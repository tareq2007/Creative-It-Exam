<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
    <title>Document</title>
    <style>
      body {
        min-height: 100vh;
        margin: 0;
        background: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%);
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      h1,
      h2 {
        color: #222;
        text-shadow: 0 2px 8px rgba(255, 255, 255, 0.3);
      }
      .glass-table {
        margin: 30px auto;
        border-radius: 20px;
        background: rgba(255, 255, 255, 0.18);
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.25);
        backdrop-filter: blur(12px) saturate(180%);
        -webkit-backdrop-filter: blur(12px) saturate(180%);
        border: 1.5px solid rgba(255, 255, 255, 0.35);
        width: 90%;
        max-width: 900px;
        overflow: hidden;
      }
      .glass-table th,
      .glass-table td {
        padding: 16px 22px;
        text-align: left;
        color: #222;
        background: rgba(255, 255, 255, 0.3);
        border-bottom: 1px solid rgba(255, 255, 255, 0.18);
      }
      .glass-table th {
        background: rgba(255, 255, 255, 0.45);
        font-weight: 700;
        letter-spacing: 0.5px;
      }
      .glass-table tr:last-child td {
        border-bottom: none;
      }
      .glass-table tr:nth-child(even) td {
        background: rgba(255, 255, 255, 0.22);
      }
      .glass-table tr:hover td {
        background: rgba(173, 216, 230, 0.32);
        transition: background 0.2s;
      }
    </style>
  </head>
  <body>
    {% if messages %}
    <div
      style="
        position: fixed;
        top: 30px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 9999;
        min-width: 300px;
        max-width: 600px;
      "
    >
      {% for message in messages %}
      <div
        class="alert alert-{{ message.tags }} alert-dismissible fade show mb-2"
        role="alert"
      >
        {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}<strong
          >Important:</strong
        >
        {% endif %} {{ message }}
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="alert"
          aria-label="Close"
        ></button>
      </div>
      {% endfor %}
    </div>
    {% endif %}


    <h1>Student Record Management System (Full Web CRUD without API)</h1>
    <hr />

    <form class="d-flex" role="search">
    
      <input
        class="form-control me-2"
        type="search"
        name="search"
        value="{{ search }}"
        placeholder="Search"
        aria-label="Search"
      />
      <button class="btn btn-outline-primary" type="submit">Search</button> 
      {% comment %} <button class="btn btn-outline-primary">Hellow "{{request.user.username}}"</button> {% endcomment %}
    </form>

    <table class="glass-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Roll</th>
          <th>Department</th>
          <th>Created At</th>
          <th>
            <a href="{% url 'add-student' %}"
              ><i class="fa-solid fa-user-plus"> </i
            ></a>
          </th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for student in students %}
        <tr>
          <td>{{ student.name }}</td>
          <td>{{ student.email }}</td>
          <td>{{ student.roll_number }}</td>
          <td>{{ student.departmet }}</td>
          <td>{{ student.created_at|timesince }}</td>
          <td>
            <a href="{% url 'update-student' student.id %}"
              ><i class="fa-solid fa-wrench"></i>
            </a>
          </td>
          <td>
            <a href="{% url 'delete-student' student.id %}"
              ><i class="fa-solid fa-trash-can"></i
            ></a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </body>
</html>
